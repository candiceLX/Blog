<!DOCTYPE html>     
     

<html class="theme-next mist use-motion" lang="zh-CN">

<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">
<!-- <script>
  
  (function () {
    if ('') {
      if (prompt('请输入文章密码') !== '') {
        alert('密码错误！');
        history.back();
      }
    }
  })();
</script> -->













<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.3.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.3.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.3.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  



 <meta name="description" content="看看字符串，和数组有异曲同工之妙，字符串也可以通过split来变成数组，然后使用数组的方法。">
<meta name="keywords" content="javascript">
<meta property="og:type" content="article">
<meta property="og:title" content="字符串的方法的总结和使用">
<meta property="og:url" content="www.0li.xin/2020/10/15/2019-01-09-字符串的方法的总结和使用/index.html">
<meta property="og:site_name" content="Candice">
<meta property="og:description" content="看看字符串，和数组有异曲同工之妙，字符串也可以通过split来变成数组，然后使用数组的方法。">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2020-10-15T10:23:52.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="字符串的方法的总结和使用">
<meta name="twitter:description" content="看看字符串，和数组有异曲同工之妙，字符串也可以通过split来变成数组，然后使用数组的方法。">






  <link rel="canonical" href="www.0li.xin/2020/10/15/2019-01-09-字符串的方法的总结和使用/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>字符串的方法的总结和使用 | Candice</title>
  








 <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

  <!-- <script src="//tencent.beecdn.cn/libs/vConsole/3.2.0/vconsole.min.js"></script>
  <script>
    var vConsole = new VConsole();

  </script> -->
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

     

  <div class="container sidebar-position-left page-post-detail"> 
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Candice</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">candiceBlog</p>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />搜索</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div> 
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="www.0li.xin/2020/10/15/2019-01-09-字符串的方法的总结和使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="candice">
      <meta itemprop="description" content="平凡的你的不平凡">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Candice">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">字符串的方法的总结和使用
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-10-15 10:23:52" itemprop="dateCreated datePublished" datetime="2020-10-15T10:23:52Z">2020-10-15</time>
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/记录/" itemprop="url" rel="index"><span itemprop="name">记录</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          
              <div class="post-description">看看字符串，和数组有异曲同工之妙，字符串也可以通过split来变成数组，然后使用数组的方法。</div>
          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>前些天写了篇数组的总结，其实我们再来看看字符串，和数组有异曲同工之妙，字符串也可以通过 <code>split</code> 来变成数组，然后使用数组的方法。</p>
<p>另外，对于字符串，其实我们关心的只有一个问题，<strong>返回值是什么</strong>。</p>
<p>接下来，我会带大家一步步的使用 <code>String</code> 里面所拥有的方法和属性</p>
<h1 id="字符串的属性"><a href="#字符串的属性" class="headerlink" title="字符串的属性"></a>字符串的属性</h1><h2 id="length"><a href="#length" class="headerlink" title="length"></a>length</h2><p>length属性表示一个字符串的长度。该属性返回字符串中字符编码单元的数量。JavaScript 使用 UTF-16 编码，该编码使用一个 16 比特的编码单元来表示大部分常见的字符，使用两个代码单元表示不常用的字符。因此 length 返回值可能与字符串中实际的字符数量不相同。</p>
<p><strong>空字符串的 length 为 0。</strong></p>
<p><strong>静态属性 String.length 返回 1。</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.length) <span class="comment">// 6</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> empty = <span class="string">""</span></span><br><span class="line"><span class="built_in">console</span>.log(empty.length) <span class="comment">// 0  </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// JavaScript 内部，字符以 UTF-16 的格式储存，每个字符固定为2个字节。</span></span><br><span class="line"><span class="comment">// 对于那些需要4个字节储存的字符（Unicode 码点大于0xFFFF的字符），JavaScript 会认为它们是两个字符。</span></span><br><span class="line"><span class="keyword">let</span> double = <span class="string">"𪚥"</span></span><br><span class="line"><span class="built_in">console</span>.log(double.length) <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 从数组的length我们可得知，数组的 length 来截断数组，字符串的可不可以呢？</span></span><br><span class="line"><span class="comment">// 很遗憾的说，不行，因为字符串的length只可读，不可写</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">"gating"</span></span><br><span class="line">name.length = <span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(name,name.length) <span class="comment">// gating,6</span></span><br></pre></td></tr></table></figure>
<h1 id="字符串的静态方法"><a href="#字符串的静态方法" class="headerlink" title="字符串的静态方法"></a>字符串的静态方法</h1><h2 id="字符的-Unicode-表示法"><a href="#字符的-Unicode-表示法" class="headerlink" title="字符的 Unicode 表示法"></a>字符的 Unicode 表示法</h2><p>说到字符串，不得不说 JavaScript 中的字符串的 <code>Unicode</code> 表示形式，JavaScript 允许采用<code>\uxxxx</code>形式表示一个字符，其中<code>xxxx</code>表示字符的<code>Unicode</code>码点。</p>
<p>但是，这种表示法只限于码点在\u0000~\uFFFF之间的字符。超出这个范围的字符，必须用两个双字节的形式表示。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 比如</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"\u0061"</span>) <span class="comment">// a</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"\uD842\uDFB7"</span>) <span class="comment">// 𠮷</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"\u20BB7"</span>) <span class="comment">// "₻7"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 但是 es6 对这一点做出了改进，只要将码点放入大括号，就能正确解读该字符。</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"\u&#123;20BB7&#125;"</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>参考链接 <a href="http://es6.ruanyifeng.com/#docs/string" target="_blank" rel="noopener">ECMAScript 6 入门</a> 建议去了解一下，这里我就不做过多解释了，因为我用的真的不多（主要也是不会）</p>
</blockquote>
<h2 id="String-fromCharCode"><a href="#String-fromCharCode" class="headerlink" title="String.fromCharCode()"></a>String.fromCharCode()</h2><p>String.fromCharCode() 方法返回使用指定的Unicode值序列创建的字符串。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * String.fromCharCode(numN)</span></span><br><span class="line"><span class="comment"> * @param &#123;Number/String&#125; numN =&gt; 一组序列数字，表示 Unicode 值。</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; 该方法返回一个字符串，而不是一个 String 对象。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.fromCharCode(<span class="number">65</span>)) <span class="comment">// A</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.fromCharCode(<span class="number">65</span>,<span class="number">66</span>)) <span class="comment">// AB</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.fromCharCode(<span class="string">"----"</span>)) <span class="comment">// " "</span></span><br></pre></td></tr></table></figure>
<h3 id="作用于高位编码（higher-values）"><a href="#作用于高位编码（higher-values）" class="headerlink" title="作用于高位编码（higher values）"></a>作用于高位编码（higher values）</h3><p>尽管绝大部分常用的 Unicode 值可以用一个 16-bit 数字表示（正如 JavaScript 标准化过程早期），并且对于绝大部分值 fromCharCode() 返回一个字符（即对于绝大部分字符 UCS-2 值是 UTF-16 的子集），但是为了处理所有的 Unicode 值（至 21 bits），只用 fromCharCode() 是不足的。由于高位编码字符是用两个低位编码（lower value）表示形成的一个字符，因此String.fromCodePoint() （ES6 规范的一部分）被用来返回这样一对低位编码，从而可以完全表示这些高位编码字符。</p>
<h2 id="String-fromCodePoint"><a href="#String-fromCodePoint" class="headerlink" title="String.fromCodePoint()"></a>String.fromCodePoint()</h2><p>String.fromCodePoint() 静态方法返回使用指定的代码点序列创建的字符串。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * String.fromCodePoint(numN)</span></span><br><span class="line"><span class="comment"> * @param &#123;Number/String&#125; numN =&gt; 一串 Unicode 编码。如果传入无效的 Unicode 编码，将会抛出一个RangeError</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; 该方法返回一个字符串，而不是一个 String 对象。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.fromCodePoint(<span class="number">65</span>)) <span class="comment">// A</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.fromCodePoint(<span class="number">65</span>,<span class="number">66</span>)) <span class="comment">// AB</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.fromCodePoint(<span class="string">"----"</span>)) <span class="comment">// RangeError</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// String.fromCharCode() 方法不能单独获取在高代码点位上的字符</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.fromCharCode(<span class="number">0x2F804</span>)) <span class="comment">// </span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.fromCodePoint(<span class="number">0x2F804</span>)) <span class="comment">// 你</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>具体实际用理可以看看 MDN 这里不做阐述了，因为博主这两个方法用着不多 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/fromCharCode" target="_blank" rel="noopener">String.fromCharCode()</a>、<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/fromCodePoint" target="_blank" rel="noopener">String.fromCodePoint()</a></p>
</blockquote>
<h2 id="String-raw-和-模板字符串"><a href="#String-raw-和-模板字符串" class="headerlink" title="String.raw 和 模板字符串"></a>String.raw 和 模板字符串</h2><h3 id="模板字符串"><a href="#模板字符串" class="headerlink" title="模板字符串"></a>模板字符串</h3><p>了解<code>String.raw</code>时，我们必须先了解一下什么是模板字符串，简单来说模板字符串是增强版的字符串，他用反引号（`）标识。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 字符串中嵌入变量</span></span><br><span class="line"><span class="comment">// es6 之前，我们如果想要在字符串嵌入变量需要通过+号</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">"gating"</span>, time = <span class="string">"today"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"Hello "</span>+name+<span class="string">", how are you "</span> + time) <span class="comment">// Hello gating, how are you today?</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 模板字符串后</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">"gating"</span>, time = <span class="string">"today"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`Hello <span class="subst">$&#123;name&#125;</span>, how are you <span class="subst">$&#123;time&#125;</span>?`</span>) <span class="comment">// Hello gating, how are you today?</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 另外模板字符串可以表示多行字符串</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">`&lt;ul&gt;</span></span><br><span class="line"><span class="string">             &lt;li&gt;first&lt;/li&gt;</span></span><br><span class="line"><span class="string">             &lt;li&gt;second&lt;/li&gt;</span></span><br><span class="line"><span class="string">          &lt;/ul&gt;`</span></span><br></pre></td></tr></table></figure>
<h3 id="String-raw"><a href="#String-raw" class="headerlink" title="String.raw"></a>String.raw</h3><p>String.raw() 是一个模板字符串的标签函数，它的作用类似于 Python 中的字符串前缀 r 和 C# 中的字符串前缀 @，是用来获取一个模板字符串的原始字面量值的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * String.raw(callSite, ...substitutions) || String.raw`templateString`</span></span><br><span class="line"><span class="comment"> * @param &#123;Object&#125; callSite =&gt; 一个模板字符串的“调用点对象”。类似&#123; raw: ['foo', 'bar', 'baz'] &#125;。</span></span><br><span class="line"><span class="comment"> * @param &#123;Any&#125; ...substitutions =&gt; 任意个可选的参数，表示任意个内插表达式对应的值。</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; templateString =&gt; 模板字符串。</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; 给定模板字符串的原始字面量值。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// "Hi\\u000A!"，这里得到的会是 \、u、0、0、0、A 6个字符</span></span><br><span class="line"><span class="comment">// 任何类型的转义形式都会失效</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.raw <span class="string">`Hi\u000A!`</span>) <span class="comment">// Hi\u000A!</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">"Bob"</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.raw <span class="string">`Hi\n<span class="subst">$&#123;name&#125;</span>!`</span>) <span class="comment">// Hi\nBob!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 我认为你通常不需要把它当成普通函数来调用</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.raw(&#123; <span class="attr">raw</span>: <span class="string">'test'</span> &#125;, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>)) <span class="comment">// t0e1s2t</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.raw(&#123; <span class="attr">raw</span>: [<span class="string">'t'</span>,<span class="string">'e'</span>,<span class="string">'s'</span>,<span class="string">'t'</span>] &#125;, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>)) <span class="comment">// t0e1s2t</span></span><br></pre></td></tr></table></figure>
<p>作为函数，String.raw的代码实现基本如下。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.raw = <span class="function"><span class="keyword">function</span> (<span class="params">strings, ...values</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> output = <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">let</span> index;</span><br><span class="line">  <span class="keyword">for</span> (index = <span class="number">0</span>; index &lt; values.length; index++) &#123;</span><br><span class="line">    output += strings.raw[index] + values[index];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  output += strings.raw[index]</span><br><span class="line">  <span class="keyword">return</span> output;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="http://es6.ruanyifeng.com/#docs/string#String-raw" target="_blank" rel="noopener">ES6入门 String.raw()</a></p>
</blockquote>
<h1 id="正则相关"><a href="#正则相关" class="headerlink" title="正则相关"></a>正则相关</h1><blockquote>
<p>正则推荐观看文末的 正则表达式30分钟入门教程 ，写的非常好</p>
</blockquote>
<h2 id="split"><a href="#split" class="headerlink" title="split"></a>split</h2><p>split() 方法使用指定的分隔符字符串将一个String对象分割成字符串数组，以将字符串分隔为子字符串，以确定每个拆分的位置。 </p>
<blockquote>
<p>Tip: 如果空字符串(“”)被用作分隔符，则字符串会在每个字符之间分割。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.split(separator,limit)</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; separator =&gt; 一个介于0 和字符串长度减1之间的整数。 (0~length-1) 如果没有提供索引，charAt() 将使用 0。如果指定的 index 值超出了该范围，则返回一个空字符串。</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; limit =&gt; 一个整数，限定返回的分割片段数量。当提供此参数时，split 方法会在指定分隔符的每次出现时分割该字符串，但在限制条目已放入数组时停止。如果在达到指定限制之前达到字符串的末尾，它可能仍然包含少于限制的条目。新数组中不返回剩下的文本。</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;Array&#125; 返回源字符串以分隔符出现位置分隔而成的一个 Array </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.split(<span class="string">''</span>)) <span class="comment">// ["g", "a", "t", "i", "n", "g"]</span></span><br><span class="line"><span class="built_in">console</span>.log(str.split(<span class="string">''</span>,<span class="number">1</span>)) <span class="comment">// ["g"]</span></span><br><span class="line"><span class="built_in">console</span>.log(str.split(<span class="string">''</span>,<span class="number">8</span>)) <span class="comment">// ["g", "a", "t", "i", "n", "g"]</span></span><br></pre></td></tr></table></figure>
<p>看到这里，是不是感觉可以用通过<code>split</code>转成数组，使用数组的方法啦？没错是的，还记得前些天我写过一篇数组的方法的总结吗？没错，重新看一遍就可以了O(∩_∩)O</p>
<p>不信，你看，我们可以通过 <code>split</code> 获取字符串的交集或差集哦</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 返回两个字符串的交集</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; str =&gt; 字符串1 </span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; str =&gt; 字符串2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">intersection</span>(<span class="params">str1, str2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> str1.split(<span class="string">""</span>).filter(<span class="function"><span class="params">v</span> =&gt;</span> str2.split(<span class="string">""</span>).includes(v)).toString().replace(<span class="regexp">/,/g</span>, <span class="string">""</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(intersection(<span class="string">"abc"</span>,<span class="string">"bcd"</span>)) <span class="comment">// bc</span></span><br></pre></td></tr></table></figure>
<p>是不是感觉自己已经对字符串了如指掌了吗？</p>
<blockquote>
<p>好了，本次教程到此结束了</p>
</blockquote>
<p>开个玩笑嘛，接下来我会陆陆续续带大家认识下 <code>string</code> 的方法的。</p>
<h2 id="match"><a href="#match" class="headerlink" title="match"></a>match</h2><p>当一个字符串与一个正则表达式匹配时， match()方法检索匹配项</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.match(regexp)</span></span><br><span class="line"><span class="comment"> * @param &#123;RegExp&#125; regexp =&gt; 个正则表达式对象。如果传入一个非正则表达式对象，则会隐式地使用 new RegExp(obj) 将其转换为一个 RegExp 。如果你未提供任何参数，直接使用 match() ，那么你会得到一个包含空字符串的 Array ：[""] 。</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125;  如果字符串匹配到了表达式，会返回一个数组，数组的第一项是进行匹配完整的字符串，之后的项是用圆括号捕获的结果。如果没有匹配到，返回null</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="keyword">const</span> res = str.match(<span class="regexp">/g/g</span>)</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// ["g", "g"]</span></span><br><span class="line"><span class="built_in">console</span>.log(str.match()) <span class="comment">// [""]</span></span><br><span class="line"><span class="built_in">console</span>.log(str.match(<span class="regexp">/sadasd/</span>)) <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str1 = <span class="string">"NaN means not a number. Infinity contains -Infinity and +Infinity in JavaScript."</span>,</span><br><span class="line">    str2 = <span class="string">"My grandfather is 65 years old and My grandmother is 63 years old."</span>,</span><br><span class="line">    str3 = <span class="string">"The contract was declared null and void."</span>;</span><br><span class="line">str1.match(<span class="string">"number"</span>);   <span class="comment">// "number" 是字符串。返回["number"]</span></span><br><span class="line">str1.match(<span class="literal">NaN</span>);        <span class="comment">// NaN的类型是number。返回["NaN"]</span></span><br><span class="line">str1.match(<span class="literal">Infinity</span>);   <span class="comment">// Infinity的类型是number。返回["Infinity"]</span></span><br><span class="line">str1.match(+<span class="literal">Infinity</span>);  <span class="comment">// 返回["Infinity"]</span></span><br><span class="line">str1.match(-<span class="literal">Infinity</span>);  <span class="comment">// 返回["-Infinity"]</span></span><br><span class="line">str2.match(<span class="number">65</span>);         <span class="comment">// 返回["65"]</span></span><br><span class="line">str2.match(+<span class="number">65</span>);        <span class="comment">// 有正号的number。返回["65"]</span></span><br><span class="line">str3.match(<span class="literal">null</span>);       <span class="comment">// 返回["null"]</span></span><br></pre></td></tr></table></figure>
<h2 id="replace"><a href="#replace" class="headerlink" title="replace"></a>replace</h2><p>replace() 方法返回一个由替换值替换一些或所有匹配的模式后的新字符串。模式可以是一个字符串或者一个正则表达式, 替换值可以是一个字符串或者一个每次匹配都要调用的函数。</p>
<blockquote>
<p>replace 十分重要，必须掌握</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.replace(regexp|substr, newSubStr|function)</span></span><br><span class="line"><span class="comment"> *  @param &#123;RegExp&#125; regexp =&gt; 一个RegExp 对象或者其字面量。该正则所匹配的内容会被第二个参数的返回值替换掉。</span></span><br><span class="line"><span class="comment"> *  @param &#123;String&#125; substr =&gt; 一个要被 newSubStr 替换的字符串。其被视为一整个字符串，而不是一个正则表达式。仅仅是第一个匹配会被替换。</span></span><br><span class="line"><span class="comment"> *  @param &#123;String&#125; newSubStr =&gt;  用于替换掉第一个参数在原字符串中的匹配部分的字符串。该字符串中可以内插一些特殊的变量名 </span></span><br><span class="line"><span class="comment"> *  @param &#123;Function&#125; function =&gt; 一个用来创建新子字符串的函数，该函数的返回值将替换掉第一个参数匹配到的结果 </span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125;  一个部分或全部匹配由替代模式所取代的新的字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 特殊的变量名 和 function 在实例中 会更详细说明</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="comment">// 如果用 substr ，只会替换找到的第一个字符，替换多个字符则需要用正则</span></span><br><span class="line"><span class="built_in">console</span>.log(str.replace(<span class="string">'g'</span>,<span class="string">'家庭'</span>)) <span class="comment">// 家庭ating</span></span><br><span class="line"><span class="built_in">console</span>.log(str.replace(<span class="regexp">/g/</span>,<span class="string">'家庭'</span>)) <span class="comment">// 家庭ating</span></span><br><span class="line"><span class="built_in">console</span>.log(str.replace(<span class="regexp">/g/g</span>,<span class="string">'家庭'</span>)) <span class="comment">// 家庭atin家庭</span></span><br><span class="line"><span class="built_in">console</span>.log(str.replace(<span class="regexp">/g/i</span>,<span class="string">'G'</span>)) <span class="comment">// Gating</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> word = <span class="string">"hello,gating"</span></span><br><span class="line"><span class="comment">// 单词首字母大写</span></span><br><span class="line"><span class="comment">// 这里的 word 参数时匹配的字符串，下文有说明</span></span><br><span class="line"><span class="keyword">let</span> res = word.replace(<span class="regexp">/\b\w+\b/g</span>,(word)=&gt;(word[<span class="number">0</span>].toUpperCase()+word.slice(<span class="number">1</span>)))</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// Hello,Gating</span></span><br></pre></td></tr></table></figure>
<p>实际应用场景中，<code>replace</code> 方法非常灵活，可以做很多我们想要的事，比如：😄</p>
<p>类似于我们的模板引擎 replace 就可以实现，不过这里我就不带着大家实现了= =</p>
<p>在写实例时，我希望可以先搞懂几个概念和用法</p>
<h3 id="newSubStr-的特殊变量名"><a href="#newSubStr-的特殊变量名" class="headerlink" title="newSubStr 的特殊变量名"></a>newSubStr 的特殊变量名</h3><table>
<thead>
<tr>
<th>变量名</th>
<th>代表的值</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$$</code></td>
<td>插入一个 “$”。</td>
</tr>
<tr>
<td><code>$&amp;</code></td>
<td>插入匹配的子串。</td>
</tr>
<tr>
<td><code>$`</code></td>
<td>插入当前匹配的子串左边的内容。</td>
</tr>
<tr>
<td><code>$&#39;</code></td>
<td>插入当前匹配的子串右边的内容。</td>
</tr>
<tr>
<td><code>$*n*</code></td>
<td>假如第一个参数是 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/RegExp" target="_blank" rel="noopener"><code>RegExp</code></a>对象，并且 n 是个小于100的非负整数，那么插入第 n 个括号匹配的字符串。提示：索引是从1开始</td>
</tr>
</tbody>
</table>
<h3 id="replace-中-function-的参数"><a href="#replace-中-function-的参数" class="headerlink" title="replace 中 function 的参数"></a>replace 中 function 的参数</h3><table>
<thead>
<tr>
<th>变量名</th>
<th>代表的值</th>
</tr>
</thead>
<tbody>
<tr>
<td>match</td>
<td>匹配的子串。（对应于上述的$&amp;。）</td>
</tr>
<tr>
<td><code>p1,p2, ...</code></td>
<td>假如replace()方法的第一个参数是一个<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/RegExp" target="_blank" rel="noopener"><code>RegExp</code></a> 对象，则代表第n个括号匹配的字符串。（对应于上述的$1，$2等。）例如, 如果是用 <code>/(\a+)(\b+)/</code>这个来匹配， <code>p1</code>就是匹配的 <code>\a+</code>,  <code>p2 就是匹配的</code> <code>\b+。</code></td>
</tr>
<tr>
<td><code>offset</code></td>
<td>匹配到的子字符串在原字符串中的偏移量。（比如，如果原字符串是“abcd”，匹配到的子字符串是“bc”，那么这个参数将是1）</td>
</tr>
<tr>
<td>string</td>
<td>被匹配的原字符串。</td>
</tr>
</tbody>
</table>
<blockquote>
<p>你可以指定一个函数作为第二个参数。在这种情况下，当匹配执行后， 该函数就会执行。 函数的返回值作为替换字符串。 (注意:  上面提到的特殊替换参数在这里不能被使用。) 另外要注意的是， 如果第一个参数是正则表达式， 并且其为全局匹配模式， 那么这个方法将被多次调用， 每次匹配都会被调用。</p>
</blockquote>
<p>在实际应用中,<code>replace</code>的使用可以满足大部分的操作字符串场景,特别是function的引入,极大的增强了replace的实力,从而使得我们操作字符游刃有余.</p>
<p>在写实例的时，我们需要搞懂几个<code>newSubStr</code>特殊变量名，他在实际应用中也很有作用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">'gating'</span></span><br><span class="line"><span class="comment">// $&amp; 表示匹配到的字串，这里匹配到了 gating ，所以 $&amp; 就等于 gating</span></span><br><span class="line"><span class="built_in">console</span>.log(name.replace(<span class="regexp">/\w+/</span>,<span class="string">'$&amp;-$&amp;'</span>)) <span class="comment">// gating-gating</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating say hello for mosen"</span></span><br><span class="line"><span class="comment">// $1 表示匹配第一个括号里的内容 也就是 $1 就是 gating </span></span><br><span class="line"><span class="built_in">console</span>.log(str.replace(<span class="regexp">/(^\w+)(.*?)(\w+)$/</span>,<span class="string">'$3$2$1'</span>)) <span class="comment">// mosen say hello for gating\</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> hello = <span class="string">"hello,gating"</span></span><br><span class="line"><span class="comment">// $`当前匹配的子串左边的内容。</span></span><br><span class="line"><span class="built_in">console</span>.log(hello.replace(<span class="regexp">/gating/</span>,<span class="string">"&amp;.$`mosen"</span>)) <span class="comment">// hello,gating.hello,mosen</span></span><br><span class="line"><span class="comment">// $'当前匹配的子串右边的内容。(不是例子的例子)</span></span><br><span class="line"><span class="built_in">console</span>.log(hello.replace(<span class="regexp">/hello,/</span>,<span class="string">"$' say hi for $`"</span>)) <span class="comment">// gating say hi for gating</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// function 的 用法</span></span><br><span class="line"><span class="keyword">let</span> paragraph = <span class="string">"what is this?"</span></span><br><span class="line"><span class="keyword">let</span> res = paragraph.replace(<span class="string">" is this"</span>,(match,offset,string)=&gt;&#123;</span><br><span class="line">    <span class="comment">// match 匹配的子串</span></span><br><span class="line">    <span class="comment">// offset 偏移量 这是是4 也就是 偏移了what4个字符</span></span><br><span class="line">    <span class="comment">// string 元字符</span></span><br><span class="line">    <span class="built_in">console</span>.log(match,offset,string) <span class="comment">//  is this 4 what is this?</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">" is that"</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// what is that?</span></span><br></pre></td></tr></table></figure>
<p>了解了这些，那么我们就可以做写点比较实际的了</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// js 隐藏手机中间5位号码</span></span><br><span class="line"><span class="keyword">let</span> phone=<span class="string">'13700000137'</span></span><br><span class="line"><span class="built_in">console</span>.log(phone.replace(<span class="regexp">/(\d&#123;3&#125;)\d+(\d&#123;3&#125;)/</span>, <span class="string">'$1****$2'</span>)) <span class="comment">// 137****137</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将阿拉伯数字每三位一逗号分隔，如：1000转化为1,000</span></span><br><span class="line"><span class="keyword">let</span> price =  <span class="string">'3521.08'</span></span><br><span class="line"><span class="built_in">console</span>.log(price.replace(<span class="regexp">/(?=(?!^)(?:\d&#123;3&#125;)+(?:\.|$))(\d&#123;3&#125;(\.\d+$)?)/g</span>,<span class="string">',$1'</span>)) <span class="comment">// 3,521.08</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// html 转义，防止用户注入</span></span><br><span class="line"><span class="keyword">let</span> html = <span class="string">'&lt;div&gt;"hello &amp; world"&lt;/div&gt;'</span>;</span><br><span class="line"><span class="keyword">let</span> res = html.replace(<span class="regexp">/[&lt;&gt;\"\'\&amp;']/g</span>,<span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">switch</span>(a)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'&lt;'</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'&amp;lt;'</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'&gt;'</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'&amp;gt;'</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'\"'</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'&amp;quot;'</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'\''</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'&amp;#39;'</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'\&amp;'</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'&amp;amp;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// &amp;lt;div&amp;gt;&amp;quot;hello &amp;amp; world&amp;quot;&amp;lt;/div&amp;gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 简易的字符串模板引擎</span></span><br><span class="line"><span class="keyword">let</span> template = <span class="string">"My name is &#123;name&#125;"</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;<span class="attr">name</span>:<span class="string">'gating'</span>&#125;</span><br><span class="line"><span class="keyword">const</span> tmpl = <span class="function">(<span class="params">template,obj</span>)=&gt;</span> template.replace(<span class="regexp">/([^&#123;&#125;]*)&#123;(.*)&#125;/g</span>,(match,p1,p2) =&gt; (p1+obj[p2]))</span><br><span class="line"><span class="built_in">console</span>.log(tmpl(template,obj)) <span class="comment">// My name is gating</span></span><br></pre></td></tr></table></figure>
<h1 id="字符编码相关"><a href="#字符编码相关" class="headerlink" title="字符编码相关"></a>字符编码相关</h1><h2 id="charAt"><a href="#charAt" class="headerlink" title="charAt"></a>charAt</h2><p>charAt() 方法从一个字符串中返回指定的字符</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.charAt(index)</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; index =&gt; 一个介于0 和字符串长度减1之间的整数。 (0~length-1) 如果没有提供索引，charAt() 将使用 0。如果指定的 index 值超出了该范围，则返回一个空字符串。</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; 当前索引的字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.charAt(<span class="number">0</span>)) <span class="comment">// g</span></span><br><span class="line"><span class="built_in">console</span>.log(str.charAt(<span class="number">6</span>)) <span class="comment">// ""</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// charAt 和 fromCharCode 用同样的问题，他不能识别高位编码</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"𠮷"</span>.charAt(<span class="number">0</span>)) <span class="comment">// �</span></span><br></pre></td></tr></table></figure>
<h2 id="charCodeAt"><a href="#charCodeAt" class="headerlink" title="charCodeAt"></a>charCodeAt</h2><p>charCodeAt() 方法返回0到65535之间的整数，表示给定索引处的UTF-16代码单元 (在 Unicode 编码单元表示一个单一的 UTF-16 编码单元的情况下，UTF-16 编码单元匹配 Unicode 编码单元。但在——例如 Unicode 编码单元 &gt; 0x10000 的这种——不能被一个 UTF-16 编码单元单独表示的情况下，只能匹配 Unicode 代理对的第一个编码单元) 。如果你想要整个代码点的值，使用 codePointAt()。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.charCodeAt(index)</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; index =&gt; 一个大于等于 0，小于字符串长度的整数。如果不是一个数值，则默认为 0。</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; 返回值是一表示给定索引处（String中index索引处）字符的 UTF-16 代码单元值的数字；如果索引超出范围，则返回 NaN。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"ABC"</span>.charCodeAt(<span class="number">0</span>)) <span class="comment">// 65</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"ABC"</span>.charCodeAt(<span class="number">1</span>)) <span class="comment">// 66</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"ABC"</span>.charCodeAt(<span class="number">3</span>)) <span class="comment">// NaN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 针对高位编码，他会拆分成两个双字节的形式再来获取</span></span><br><span class="line"><span class="comment">// 也就是 "\uD842\uDFB7".charCodeAt(0)</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"𠮷"</span>.charCodeAt(<span class="number">0</span>)) <span class="comment">// 55362</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"𠮷"</span>.charCodeAt(<span class="number">1</span>)) <span class="comment">// 57271</span></span><br></pre></td></tr></table></figure>
<h2 id="codePointAt"><a href="#codePointAt" class="headerlink" title="codePointAt"></a>codePointAt</h2><p>codePointAt() 方法返回 一个 Unicode 编码点值的非负整数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.codePointAt(pos)</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; pos =&gt; 这个字符串中需要转码的元素的位置。</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; 返回值是在字符串中的给定索引的编码单元体现的数字(10进制数)，如果在索引处没找到元素则返回 undefined 。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"ABC"</span>.charCodeAt(<span class="number">0</span>)) <span class="comment">// 65</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"ABC"</span>.charCodeAt(<span class="number">3</span>)) <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"𠮷"</span>.codePointAt(<span class="number">0</span>)) <span class="comment">// 134071</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"𠮷"</span>.codePointAt(<span class="number">1</span>)) <span class="comment">// 57271</span></span><br></pre></td></tr></table></figure>
<p>汉字“𠮷”（注意，这个字不是“吉祥”的“吉”）的码点是0x20BB7，UTF-16 编码为0xD842 0xDFB7（十进制为55362 57271），需要4个字节储存。对于这种4个字节的字符，JavaScript 不能正确处理，字符串长度会误判为2，而且charAt方法无法读取整个字符，charCodeAt方法只能分别返回前两个字节和后两个字节的值。</p>
<blockquote>
<p>codePointAt 方法在第一个字符上，正确地识别了“𠮷”，返回了它的十进制码点 134071（即十六进制的20BB7），在第二个字符（即“𠮷”的后两个字节）codePointAt方法的结果与charCodeAt方法相同。</p>
</blockquote>
<blockquote>
<p>codePointAt方法返回的是码点的十进制值，如果想要十六进制的值，可以使用toString(16)方法转换一下。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">'𠮷a'</span></span><br><span class="line">s.codePointAt(<span class="number">0</span>) <span class="comment">// 134071</span></span><br><span class="line">s.codePointAt(<span class="number">1</span>) <span class="comment">// 57271</span></span><br><span class="line">s.codePointAt(<span class="number">2</span>) <span class="comment">// 97</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 你可能注意到了，codePointAt方法的参数，仍然是不正确的。</span></span><br><span class="line"><span class="comment">// 比如，上面代码中，字符a在字符串s的正确位置序号应该是 1，但是必须向codePointAt方法传入 2。</span></span><br><span class="line"><span class="comment">// 解决这个问题的一个办法是使用for...of循环，因为它会正确识别 32 位的 UTF-16 字符。</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> ch <span class="keyword">of</span> s) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(ch.codePointAt(<span class="number">0</span>).toString(<span class="number">16</span>)) <span class="comment">// 20bb7 61</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"\u&#123;20bb7&#125;"</span>) <span class="comment">// 𠮷</span></span><br></pre></td></tr></table></figure>
<h2 id="normalize"><a href="#normalize" class="headerlink" title="normalize"></a>normalize</h2><p>normalize() 方法会按照指定的一种 Unicode 正规形式将当前字符串正规化.</p>
<p>许多欧洲语言有语调符号和重音符号。为了表示它们，Unicode 提供了两种方法。一种是直接提供带重音符号的字符，比如Ǒ（\u01D1）。另一种是提供合成符号（combining character），即原字符与重音符号的合成，两个字符合成一个字符，比如O（\u004F）和ˇ（\u030C）合成Ǒ（\u004F\u030C）。</p>
<p>这两种表示方法，在视觉和语义上都等价，但是 JavaScript 不能识别。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.normalize(form)</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; form =&gt; 四种 Unicode 正规形式 "NFC", "NFD", "NFKC", 以及 "NFKD" 其中的一个, 默认值为 "NFC".</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; 正规化后的字符串。如果给 form 传入了非法的参数值, 则会抛出 RangeError 异常.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'\u01D1'</span>===<span class="string">'\u004F\u030C'</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'\u01D1'</span>.normalize() === <span class="string">'\u004F\u030C'</span>.normalize()) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// NFC参数返回字符的合成形式，NFD参数返回字符的分解形式。</span></span><br><span class="line"><span class="string">'\u004F\u030C'</span>.normalize(<span class="string">'NFC'</span>).length <span class="comment">// 1</span></span><br><span class="line"><span class="string">'\u004F\u030C'</span>.normalize(<span class="string">'NFD'</span>).length <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<ol>
<li><p><code>NFC</code>，默认参数，表示“标准等价合成”（Normalization Form Canonical Composition），返回多个简单字符的合成字符。所谓“标准等价”指的是视觉和语义上的等价。</p>
</li>
<li><p><code>NFD</code>，表示“标准等价分解”（Normalization Form Canonical Decomposition），即在标准等价的前提下，返回合成字符分解的多个简单字符。</p>
</li>
<li><p><code>NFKC</code>，表示“兼容等价合成”（Normalization Form Compatibility Composition），返回合成字符。所谓“兼容等价”指的是语义上存在等价，但视觉上不等价，比如“囍”和“喜喜”。（这只是用来举例，normalize方法不能识别中文。）</p>
</li>
<li><p><code>NFKD</code>，表示“兼容等价分解”（Normalization Form Compatibility Decomposition），即在兼容等价的前提下，返回合成字符分解的多个简单字符。</p>
</li>
</ol>
<blockquote>
<p>不过，normalize方法目前不能识别三个或三个以上字符的合成。这种情况下，还是只能使用正则表达式，通过 Unicode 编号区间判断。</p>
</blockquote>
<blockquote>
<p>此内容参考了 <a href="http://es6.ruanyifeng.com/#docs/string#normalize" target="_blank" rel="noopener">阮老师的normalize()</a></p>
</blockquote>
<h1 id="合并填充相关"><a href="#合并填充相关" class="headerlink" title="合并填充相关"></a>合并填充相关</h1><h2 id="concat"><a href="#concat" class="headerlink" title="concat"></a>concat</h2><p>concat() 方法将一个或多个字符串与原字符串连接合并，形成一个新的字符串并返回。</p>
<blockquote>
<p>强烈建议使用 赋值操作符（+, +=）代替 concat 方法。因为 concat 性能比较垃圾</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.concat(stringN)</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; stringN =&gt; 和原字符串连接的多个字符串</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; 连接后的字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"hello,"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.concat(<span class="string">"gating"</span>)) <span class="comment">// hello,gating</span></span><br></pre></td></tr></table></figure>
<h2 id="padEnd"><a href="#padEnd" class="headerlink" title="padEnd"></a>padEnd</h2><p>padEnd()  方法会用一个字符串填充当前字符串（如果需要的话则重复填充），返回填充后达到指定长度的字符串。从当前字符串的末尾（右侧）开始填充。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.padEnd(targetLength,padString)</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; targetLength =&gt; 当前字符串需要填充到的目标长度。如果这个数值小于当前字符串的长度，则返回当前字符串本身。</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; padString  =&gt; 填充字符串。如果字符串太长，使填充后的字符串长度超过了目标长度，则只保留最左侧的部分，其他部分会被截断。此参数的缺省值为 " "（U+0020）。</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; 在原字符串末尾填充指定的填充字符串直到目标长度所形成的新字符串。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"abc"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.padEnd(<span class="number">1</span>)) <span class="comment">// abc</span></span><br><span class="line"><span class="built_in">console</span>.log(str.padEnd(<span class="number">1</span>,<span class="string">"123"</span>)) <span class="comment">// abc</span></span><br><span class="line"><span class="built_in">console</span>.log(str.padEnd(<span class="number">4</span>,<span class="string">"123"</span>)) <span class="comment">// abc1</span></span><br><span class="line"><span class="built_in">console</span>.log(str.padEnd(<span class="number">7</span>,<span class="string">"123"</span>)) <span class="comment">// abc1231</span></span><br></pre></td></tr></table></figure>
<h2 id="padStart"><a href="#padStart" class="headerlink" title="padStart"></a>padStart</h2><p>padStart() 方法用另一个字符串填充当前字符串(重复，如果需要的话)，以便产生的字符串达到给定的长度。填充从当前字符串的开始(左侧)应用的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.padStart(targetLength,padString)</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; targetLength =&gt; 当前字符串需要填充到的目标长度。如果这个数值小于当前字符串的长度，则返回当前字符串本身。</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; padString  =&gt; 填充字符串。如果字符串太长，使填充后的字符串长度超过了目标长度，则只保留最左侧的部分，其他部分会被截断。此参数的缺省值为 " "（U+0020）。</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; 在原字符串开头填充指定的填充字符串直到目标长度所形成的新字符串。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"abc"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.padStart(<span class="number">1</span>)) <span class="comment">// abc</span></span><br><span class="line"><span class="built_in">console</span>.log(str.padStart(<span class="number">3</span>,<span class="string">'123'</span>)) <span class="comment">// abc</span></span><br><span class="line"><span class="built_in">console</span>.log(str.padStart(<span class="number">6</span>,<span class="string">'123'</span>)) <span class="comment">// 123abc</span></span><br><span class="line"><span class="built_in">console</span>.log(str.padStart(<span class="number">7</span>,<span class="string">'123'</span>)) <span class="comment">// 1231abc</span></span><br></pre></td></tr></table></figure>
<p>padStart()的常见用途是为数值补全指定位数和提示字符串格式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 生成 10 位的数值字符串</span></span><br><span class="line"><span class="string">'1'</span>.padStart(<span class="number">10</span>, <span class="string">'0'</span>) <span class="comment">// "0000000001"</span></span><br><span class="line"><span class="string">'12'</span>.padStart(<span class="number">10</span>, <span class="string">'0'</span>) <span class="comment">// "0000000012"</span></span><br><span class="line"><span class="string">'123456'</span>.padStart(<span class="number">10</span>, <span class="string">'0'</span>) <span class="comment">// "0000123456"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 提示字符串格式</span></span><br><span class="line"><span class="string">'12'</span>.padStart(<span class="number">10</span>, <span class="string">'YYYY-MM-DD'</span>) <span class="comment">// "YYYY-MM-12"</span></span><br><span class="line"><span class="string">'09-12'</span>.padStart(<span class="number">10</span>, <span class="string">'YYYY-MM-DD'</span>) <span class="comment">// "YYYY-09-12"</span></span><br></pre></td></tr></table></figure>
<h2 id="repeat"><a href="#repeat" class="headerlink" title="repeat"></a>repeat</h2><p>repeat() 构造并返回一个新字符串，该字符串包含被连接在一起的指定数量的字符串的副本。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.repeat(count)</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; count =&gt; 介于0和正无穷大之间的整数 : [0, +∞) 。表示在新构造的字符串中重复了多少遍原字符串。重复次数不能为负数。重复次数必须小于 infinity，且长度不会大于最长的字符串。</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; 包含指定字符串的指定数量副本的新字符串。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.repeat(<span class="number">2</span>)) <span class="comment">// gatinggating</span></span><br><span class="line"><span class="comment">// 参数count将会被自动转换成整数(向下取整)</span></span><br><span class="line"><span class="built_in">console</span>.log(str.repeat(<span class="number">3.5</span>)) <span class="comment">// gatinggatinggating</span></span><br><span class="line"><span class="built_in">console</span>.log(str.repeat(<span class="number">3.4</span>)) <span class="comment">// gatinggatinggating</span></span><br><span class="line"><span class="comment">// 但是，如果参数是 0 到-1 之间的小数，则等同于 0，这是因为会先进行取整运算。</span></span><br><span class="line"><span class="built_in">console</span>.log(str.repeat(<span class="number">-0.5</span>)) <span class="comment">// ""</span></span><br><span class="line"><span class="built_in">console</span>.log(str.repeat(<span class="number">0</span>)) <span class="comment">// ""</span></span><br><span class="line"><span class="comment">// 参数NaN等同于 0。</span></span><br><span class="line"><span class="built_in">console</span>.log(str.repeat(<span class="literal">NaN</span>)) <span class="comment">// ""</span></span><br><span class="line"><span class="comment">// 如果repeat的参数是字符串，则会先转换成数字</span></span><br><span class="line"><span class="built_in">console</span>.log(str.repeat(<span class="string">"aaa"</span>)) <span class="comment">// ""</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// RangeError: repeat count must be positive and less than inifinity</span></span><br><span class="line"><span class="built_in">console</span>.log(str.repeat(<span class="number">-1</span>)) </span><br><span class="line"><span class="built_in">console</span>.log(str.repeat(<span class="number">1</span>/<span class="number">0</span>))</span><br></pre></td></tr></table></figure>
<p>repeat 其实很适合我们调试的时候生成多份测试数据，比如</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> newData = [<span class="string">"1"</span>,<span class="string">"2"</span>,<span class="string">"3"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 假设我们想生成 ["1","1","2","2","3","3"] 的双份数据，那么我们就可以通过 repeat 来实现</span></span><br><span class="line"><span class="keyword">let</span> newData = myDate.map(<span class="function"><span class="params">item</span>=&gt;</span>item.repeat(<span class="number">2</span>).split(<span class="string">''</span>)).reduce(<span class="function">(<span class="params">arr,val</span>)=&gt;</span>arr.concat(val))</span><br><span class="line"><span class="built_in">console</span>.log(newData)) <span class="comment">// ["1","1","2","2","3","3"]</span></span><br></pre></td></tr></table></figure>
<h1 id="搜索查找相关"><a href="#搜索查找相关" class="headerlink" title="搜索查找相关"></a>搜索查找相关</h1><h2 id="indexOf"><a href="#indexOf" class="headerlink" title="indexOf"></a>indexOf</h2><p>indexOf() 方法返回调用  String 对象中第一次出现的指定值的索引，开始在 fromIndex进行搜索。如果未找到该值，则返回-1。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.indexOf(searchValue,fromIndex)</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; searchValue =&gt; 一个字符串表示被查找的值。</span></span><br><span class="line"><span class="comment"> * @param &#123;String/Number&#125; fromIndex =&gt; 表示调用该方法的字符串中开始查找的位置。可以是任意整数。默认值为 0。如果 fromIndex &lt; 0 则查找整个字符串（如同传进了 0）。如果 fromIndex &gt;= str.length，则该方法返回 -1。当被查找的字符串是一个空字符串，fromIndex &lt;= 0时返回0，0 &lt; fromIndex &lt;= str.length时返回fromIndex，fromIndex &gt; str.length时返回str.length。</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; 指定值的第一次出现的索引; 如果没有找到 -1。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.indexOf(<span class="string">"g"</span>)) <span class="comment">// 0</span></span><br><span class="line"><span class="comment">// 这里的 -1 也就 fromIndex &lt; 0 时，str.indexOf("a",-1) 等同于 str.indexOf("a",0)</span></span><br><span class="line"><span class="built_in">console</span>.log(str.indexOf(<span class="string">"a"</span>,<span class="number">-1</span>)) <span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 这里的 8 也就 fromIndex &gt; str.length 时，str.indexOf("a",8) 等同于 str.indexOf("a",6)</span></span><br><span class="line"><span class="built_in">console</span>.log(str.indexOf(<span class="string">"g"</span>,<span class="number">8</span>)) <span class="comment">// -1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 区分大小写</span></span><br><span class="line"><span class="built_in">console</span>.log(str.indexOf(<span class="string">"G"</span>)) <span class="comment">// -1</span></span><br></pre></td></tr></table></figure>
<p>实际应用场景中，我们可以使用使用 indexOf 统计一个字符串中某个字符出现的次数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">countStr</span>(<span class="params">str,value</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> pos = str.indexOf(<span class="string">'g'</span>);</span><br><span class="line">    <span class="keyword">while</span> (pos !== <span class="number">-1</span>) &#123;</span><br><span class="line">        count++;</span><br><span class="line">        pos = str.indexOf(<span class="string">'g'</span>, pos + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(countStr(str,<span class="string">'g'</span>)) <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<h2 id="lastIndexOf"><a href="#lastIndexOf" class="headerlink" title="lastIndexOf"></a>lastIndexOf</h2><p>lastIndexOf() 方法返回指定值在调用该方法的字符串中最后出现的位置，如果没找到则返回 -1。从该字符串的后面向前查找，从 fromIndex 处开始。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.indexOf(searchValue,fromIndex)</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; searchValue =&gt; 一个字符串表示被查找的值。</span></span><br><span class="line"><span class="comment"> * @param &#123;String/Number&#125; fromIndex =&gt; 从调用该方法字符串的此位置处开始查找。可以是任意整数。默认值为 str.length。如果为负值，则被看作 0。如果 fromIndex &gt; str.length，则 fromIndex 被看作 str.length。</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; 指定值的第一次出现的索引（从后往前数）; 如果没有找到 -1。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.lastIndexOf(<span class="string">'g'</span>)) <span class="comment">// 5</span></span><br><span class="line"><span class="built_in">console</span>.log(str.lastIndexOf(<span class="string">'g'</span>,<span class="number">2</span>)) <span class="comment">// 0 </span></span><br><span class="line"><span class="comment">// 这里的 8 也就 fromIndex &gt; str.length 时，str.lastIndexOf("a",8) 等同于 str.lastIndexOf("a",6) 也就是 str.lastIndexOf("a")</span></span><br><span class="line"><span class="built_in">console</span>.log(str.lastIndexOf(<span class="string">'g'</span>,<span class="number">8</span>)) <span class="comment">// 5 </span></span><br><span class="line"><span class="built_in">console</span>.log(str.lastIndexOf(<span class="string">'g'</span>,<span class="number">-1</span>)) <span class="comment">// -1</span></span><br><span class="line"><span class="built_in">console</span>.log(str.lastIndexOf(<span class="string">'g'</span>,<span class="number">0</span>)) <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>
<h2 id="search"><a href="#search" class="headerlink" title="search"></a>search</h2><p>search() 方法执行正则表达式和 String对象之间的一个搜索匹配。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.search(regexp)</span></span><br><span class="line"><span class="comment"> * @param &#123;Regexp&#125; regexp =&gt; 一个正则表达式（regular expression）对象。如果传入一个非正则表达式对象，则会使用 new RegExp(obj) 隐式地将其转换为正则表达式对象。</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; 如果匹配成功，则 search() 返回正则表达式在字符串中首次匹配项的索引。否则，返回 -1。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.search(<span class="string">"g"</span>)) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(str.search(<span class="regexp">/g/</span>)) <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>
<h2 id="includes"><a href="#includes" class="headerlink" title="includes"></a>includes</h2><p>includes() 方法用于判断一个字符串是否包含在另一个字符串中，根据情况返回 true 或 false。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.includes(searchString,position)</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; searchString =&gt; 要在此字符串中搜索的字符串。</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; position =&gt; 可选。从当前字符串的哪个索引位置开始搜寻子字符串，默认值为0。</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;Boolean&#125; 如果当前字符串包含被搜寻的字符串，就返回 true；否则返回 false。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.includes(<span class="string">"a"</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(str.includes(<span class="string">"a"</span>,<span class="number">1</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(str.includes(<span class="string">"a"</span>,<span class="number">2</span>)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>在 Firefox 18 - 39中，这个方法的名称叫 contains()。 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/includes#String.prototype.contains(" target="_blank" rel="noopener">具体原因请查看</a>)</p>
</blockquote>
<h2 id="startsWith"><a href="#startsWith" class="headerlink" title="startsWith"></a>startsWith</h2><p>startsWith()方法用来判断当前字符串是否是以另外一个给定的子字符串“开头”的，根据判断结果返回 true 或 false。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.startsWith(searchString,position)</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; searchString =&gt;要搜索的子字符串。</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; position =&gt; 在 str 中搜索 searchString 的开始位置，默认值为 0，也就是真正的字符串开头处。</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;Boolean&#125; 如果当前字符串以搜素字符串开头，就返回 true；否则返回 false。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.startsWith(<span class="string">'g'</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(str.startsWith(<span class="string">'g'</span>,<span class="number">1</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(str.startsWith(<span class="string">'g'</span>,<span class="number">7</span>)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h2 id="endsWith"><a href="#endsWith" class="headerlink" title="endsWith"></a>endsWith</h2><p>endsWith()方法用来判断当前字符串是否是以另外一个给定的子字符串“结尾”的，根据判断结果返回 true 或 false。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.endsWith(searchString,position)</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; searchString =&gt; 要搜索的子字符串。</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; position =&gt; 可选。作为str的长度，默认值为 str.length。</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;Boolean&#125;  如果传入的子字符串在搜索字符串的末尾就返回true；否则将返回 false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.endsWith(<span class="string">'g'</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="comment">// 这里 position 为 2 表示 str 的值就是 ga，也就是相当于 ga.endsWith('g')</span></span><br><span class="line"><span class="built_in">console</span>.log(str.endsWith(<span class="string">'g'</span>,<span class="number">2</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(str.endsWith(<span class="string">'g'</span>,<span class="number">7</span>)) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h1 id="截取相关"><a href="#截取相关" class="headerlink" title="截取相关"></a>截取相关</h1><h2 id="slice"><a href="#slice" class="headerlink" title="slice"></a>slice</h2><p>slice() 方法提取一个字符串的一部分，并返回一新的字符串。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.slice(beginSlice,endSlice)</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; beginSlice =&gt; 从该索引（以 0 为基数）处开始提取原字符串中的字符。如果值为负数，会被当做 sourceLength + beginSlice 看待，这里的sourceLength 是字符串的长度 (例如， 如果beginSlice 是 -3 则看作是: sourceLength - 3)</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; endSlice =&gt; 可选。可选。在该索引（以 0 为基数）处结束提取字符串。如果省略该参数，slice会一直提取到字符串末尾。如果该参数为负数，则被看作是 sourceLength + endSlice，这里的 sourceLength 就是字符串的长度(例如，如果 endSlice 是 -3，则是, sourceLength - 3)。</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125;  返回一个从原字符串中提取出来的新字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.slice(<span class="number">1</span>)) <span class="comment">// ating</span></span><br><span class="line"><span class="comment">// 这里的-1实际上就是 (6-1) 也就是 5 即 str.slice(5)</span></span><br><span class="line"><span class="built_in">console</span>.log(str.slice(<span class="number">-1</span>)) <span class="comment">// g</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 这里的-1实际上就是 (6-1) 也就是 5 即 str.slice(0,5)</span></span><br><span class="line"><span class="built_in">console</span>.log(str.slice(<span class="number">0</span>,<span class="number">-1</span>)) <span class="comment">// gatin</span></span><br><span class="line"><span class="built_in">console</span>.log(str.slice(<span class="number">-2</span>,<span class="number">-1</span>)) <span class="comment">// n</span></span><br><span class="line"><span class="built_in">console</span>.log(str.slice(<span class="number">-1</span>,<span class="number">-2</span>)) <span class="comment">// ""</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：slice() 提取的新字符串包括beginSlice但不包括 endSlice。</p>
</blockquote>
<h2 id="substr"><a href="#substr" class="headerlink" title="substr"></a>substr</h2><p>substr() 方法返回一个字符串中从指定位置开始到指定字符数的字符。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.substr(start,length)</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; searchString =&gt; 开始提取字符的位置。如果为负值，则被看作 strLength + start，其中 strLength 为字符串的长度（例如，如果 start 为 -3，则被看作 strLength + (-3)）</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; position =&gt; 可选。提取的字符数。默认是strLength</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125;  返回一个从原字符串中提取出来的新字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substr(<span class="number">1</span>)) <span class="comment">// ating</span></span><br><span class="line"><span class="comment">// 这里的-1实际上就是 (6-1) 也就是 5 即 str.slice(5)</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substr(<span class="number">-1</span>)) <span class="comment">// g</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 因为长度不能小于0,所以返回""</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substr(<span class="number">-1</span>,<span class="number">-2</span>)) <span class="comment">// ""</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意:在IE8下,substr()方法传递负值会返回原始的字符串,IE9修复了此BUG</p>
</blockquote>
<h2 id="substring"><a href="#substring" class="headerlink" title="substring"></a>substring</h2><p>substring() 方法返回一个字符串在开始索引到结束索引之间的一个子集, 或从开始索引直到字符串的末尾的一个子集。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.substring(indexStart,indexEnd)</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; indexStart =&gt; 需要截取的第一个字符的索引，该字符作为返回的字符串的首字母。</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; indexEnd =&gt; 可选。一个 0 到字符串长度之间的整数，以该数字为索引的字符不包含在截取的字符串内。</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125;  包含给定字符串的指定部分的新字符串。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substring(<span class="number">0</span>,<span class="number">3</span>)) <span class="comment">// gat</span></span><br><span class="line"><span class="comment">// 如果 indexStart 大于 indexEnd，则会变成 str.substring(0,3)</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substring(<span class="number">3</span>,<span class="number">0</span>)) <span class="comment">// gat</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果任一参数小于 0 或为 NaN，则被当作 0。</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substring(<span class="number">-2</span>,<span class="number">3</span>)) <span class="comment">// gat</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substring(<span class="literal">NaN</span>,<span class="number">3</span>)) <span class="comment">// gat</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str.substring(<span class="number">4</span>,<span class="number">4</span>)) <span class="comment">// ""</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substring(<span class="number">0</span>)) <span class="comment">// gating</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substring(<span class="number">0</span>,<span class="number">10</span>)) <span class="comment">// gating</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>substring 提取从 indexStart 到 indexEnd（不包括）</p>
</blockquote>
<ul>
<li>如果 indexStart 等于 indexEnd，substring 返回一个空字符串。</li>
<li>如果省略 indexEnd，substring 提取字符一直到字符串末尾。</li>
<li>如果任一参数小于 0 或为 NaN，则被当作 0。</li>
<li>如果任一参数大于 stringName.length，则被当作 stringName.length。</li>
<li>如果 indexStart 大于 indexEnd，则 substring 的执行效果就像两个参数调换了一样。</li>
</ul>
<h1 id="转换大小写相关"><a href="#转换大小写相关" class="headerlink" title="转换大小写相关"></a>转换大小写相关</h1><blockquote>
<p>注意: toLocaleLowerCase、toLocaleUpperCase 按照本地方式把字符串转换为小写。只有几种语言（如土耳其语）具有地方特有的大小写映射。</p>
</blockquote>
<h2 id="toLowerCase"><a href="#toLowerCase" class="headerlink" title="toLowerCase"></a>toLowerCase</h2><p>toLowerCase() 会将调用该方法的字符串值转为小写形式，并返回。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.toLowerCase()</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125;  一个新的字符串，表示串转换为小写的调用字符。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"GATING"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.toLowerCase()) <span class="comment">// gating</span></span><br></pre></td></tr></table></figure>
<h2 id="toLocaleLowerCase"><a href="#toLocaleLowerCase" class="headerlink" title="toLocaleLowerCase"></a>toLocaleLowerCase</h2><p>toLocaleLowerCase() 根据任何特定于语言环境的案例映射，将表示调用字符串的新字符串转换为小写。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.toLocaleLowerCase()</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125;  根据任何特定于语言环境的案例映射，将表示调用字符串的新字符串转换为小写。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"GATING"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.toLocaleLowerCase()) <span class="comment">// gating</span></span><br></pre></td></tr></table></figure>
<h2 id="toUpperCase"><a href="#toUpperCase" class="headerlink" title="toUpperCase"></a>toUpperCase</h2><p>toUpperCase() 将调用该方法的字符串值转换为大写形式，并返回。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.toUpperCase()</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125;  将调用该方法的字符串值转换为大写形式</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.toUpperCase()) <span class="comment">// GATING</span></span><br></pre></td></tr></table></figure>
<h2 id="toLocaleUpperCase"><a href="#toLocaleUpperCase" class="headerlink" title="toLocaleUpperCase"></a>toLocaleUpperCase</h2><p>toLocaleUpperCase() 将调用该方法的字符串值转换为大写形式，并返回。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.toLocaleUpperCase()</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125;  一个新的字符串，即根据本地化的大小写映射规则将输入的字符串转化成大写形式的结果。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.toLocaleUpperCase()) <span class="comment">// GATING</span></span><br></pre></td></tr></table></figure>
<h1 id="删除空白字符相关"><a href="#删除空白字符相关" class="headerlink" title="删除空白字符相关"></a>删除空白字符相关</h1><h2 id="trim"><a href="#trim" class="headerlink" title="trim"></a>trim</h2><p>trim() 方法会从一个字符串的两端删除空白字符。在这个上下文中的空白字符是所有的空白字符 (space, tab, no-break space 等) 以及所有行终止符字符（如 LF，CR）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.trim()</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125;  返回方法移除原字符串两端端的连续空白符</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"   gating   "</span></span><br><span class="line"><span class="built_in">console</span>.log(str.trim()) <span class="comment">// "gating"</span></span><br></pre></td></tr></table></figure>
<h2 id="trimRight"><a href="#trimRight" class="headerlink" title="trimRight"></a>trimRight</h2><p>trimRight() 方法从一个字符串的右端移除空白字符。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.trimRight()</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125;  返回方法移除原字符串右端的连续空白符</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating   "</span></span><br><span class="line"><span class="built_in">console</span>.log(str.trimRight()) <span class="comment">// "gating"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 兼容生产环境</span></span><br><span class="line"><span class="keyword">const</span> trimRight = <span class="function">(<span class="params">str</span>)=&gt;</span> str.replace(<span class="regexp">/(\s*$)/g</span>, <span class="string">""</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>该特性是非标准的，请尽量不要在生产环境中使用它！</p>
</blockquote>
<h2 id="trimLeft"><a href="#trimLeft" class="headerlink" title="trimLeft"></a>trimLeft</h2><p>trimLeft() 方法从一个字符串的左端移除空白字符。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.trimLeft()</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125;  返回方法移除原字符串左端的连续空白符</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"  gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.trimLeft()) <span class="comment">// "gating"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 兼容生产环境</span></span><br><span class="line"><span class="keyword">const</span> trimLeft = <span class="function">(<span class="params">str</span>)=&gt;</span> str.replace(<span class="regexp">/(^\s*)/g</span>, <span class="string">""</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>该特性是非标准的，请尽量不要在生产环境中使用它！</p>
</blockquote>
<h1 id="两个不知名的方法"><a href="#两个不知名的方法" class="headerlink" title="两个不知名的方法"></a>两个不知名的方法</h1><h2 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString"></a>toString</h2><p>toString() 方法返回指定对象的字符串形式。</p>
<p>String 对象覆盖了Object 对象的 toString 方法；并没有继承 Object.toString()。对于 String 对象，toString 方法返回该对象的字符串形式，和 String.prototype.valueOf() 方法返回值一样</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.toString()</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125;  返回指定对象的字符串形式</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">"gating"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(str.toString()) <span class="comment">// gating</span></span><br></pre></td></tr></table></figure>
<h2 id="valueOf-NaN"><a href="#valueOf-NaN" class="headerlink" title="valueOf"></a>valueOf</h2><p>valueOf() 方法返回一个String对象的原始值（primitive value）。</p>
<p>String 对象的 valueOf 方法返回一个String对象的原始值。该值等同于String.prototype.toString()。</p>
<p>该方法通常在 JavaScript 内部被调用，而不是在代码里显示调用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.valueOf()</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125;  返回指定对象的字符串形式</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">"gating"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(str.valueOf()) <span class="comment">// gating</span></span><br></pre></td></tr></table></figure>
<h1 id="排序相关"><a href="#排序相关" class="headerlink" title="排序相关"></a>排序相关</h1><h2 id="localeCompare"><a href="#localeCompare" class="headerlink" title="localeCompare"></a>localeCompare</h2><p>localeCompare() 方法返回一个数字来指示一个参考字符串是否在排序顺序前面或之后或与给定字符串相同。</p>
<p>新的 locales 、 options 参数能让应用程序定制函数的行为即指定用来排序的语言。  locales 和 options 参数是依赖于具体实现的，在旧的实现中这两个参数是完全被忽略的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.localeCompare(compareString,locales,options)</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; compareString =&gt; 用来比较的字符串</span></span><br><span class="line"><span class="comment"> * @param &#123;locales&#125; locales =&gt; 可选。用来表示一种或多种语言或区域的一个符合 BCP 47 标准的字符串或一个字符串数组。locales参数的一般形式与解释， 详情请参考 MDN</span></span><br><span class="line"><span class="comment"> * @param &#123;options&#125; options =&gt; 可选。 支持下列的一些或全部属性的一个对象: 详情请参考 MDN</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * 返回值</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125;  如果引用字符存在于比较字符之前则为负数; 如果引用字符存在于比较字符之后则为正数; 相等的时候返回 0 .不同浏览器之间（以及不同浏览器版本之间）返回的正负数的值各有不同</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"b"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.localeCompare(<span class="string">"b"</span>)) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(str.localeCompare(<span class="string">"a"</span>)) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(str.localeCompare(<span class="string">"c"</span>)) <span class="comment">// -1</span></span><br></pre></td></tr></table></figure>
<p>实际上，我们就可以通过 localeCompare 实现中文排序了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">"北京"</span>,<span class="string">"上海"</span>,<span class="string">"深圳"</span>,<span class="string">"广州"</span>]</span><br><span class="line"><span class="keyword">let</span> res1 = arr.sort(<span class="function">(<span class="params">a,b</span>)=&gt;</span>a-b)</span><br><span class="line"><span class="comment">// 传统的排序方法，你会发现顺序是有问题的</span></span><br><span class="line"><span class="built_in">console</span>.log(res1) <span class="comment">// ["北京", "上海", "广州", "深圳"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过 localeCompare 我们就实现了中文的排序了</span></span><br><span class="line"><span class="keyword">let</span> res2 = arr.sort(<span class="function">(<span class="params">a,b</span>)=&gt;</span>a.localeCompare(<span class="built_in">String</span>(b)))</span><br><span class="line"><span class="built_in">console</span>.log(res2) <span class="comment">// ["北京", "广州", "上海", "深圳"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 但是其实这个还是没有实现我们的需求，假设我们 数组既有数字、英文、中文、特殊符号的话，我们的排序就不能这么简单的排序了</span></span><br><span class="line"><span class="keyword">let</span> myData = [<span class="string">"北京"</span>,<span class="string">"上海"</span>,<span class="string">"深圳"</span>,<span class="string">"广州"</span>,<span class="literal">null</span>,<span class="literal">undefined</span>,<span class="number">10</span>,<span class="number">2</span>,<span class="string">"apple"</span>,<span class="string">"bird"</span>,<span class="string">"banana"</span>]</span><br><span class="line"><span class="keyword">let</span> result = myData.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> r = a - b;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">isNaN</span>(r))&#123;</span><br><span class="line">        r = <span class="built_in">String</span>(a).localeCompare(<span class="built_in">String</span>(b));</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> r;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/localeCompare" target="_blank" rel="noopener">localeCompare方法，十分建议看看MDN</a>，因为我实在太菜了 ┭┮﹏┭┮</p>
</blockquote>
<p>当比较大量字符串时， 比如比较大量数组时， 最好创建一个 <code>[Intl.Collator](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Collator)</code> 对象并使用compare 属性所提供的函数。</p>
<pre><code class="javascript"><span class="comment">// Intl.Collator 是用于语言敏感字符串比较的 collators构造函数。</span>
<span class="function"><span class="keyword">function</span> <span class="title">letterSort</span>(<span class="params">lang, letters</span>) </span>{
<span class="number">21</span><span class="string">`</span>
<span class="string"> letters.sort(new Intl.Collator(lang).compare)/. mnbyutrr ;l'/01</span>
<span class="string">  return letters;</span>
<span class="string">}</span>
<span class="string"></span>
<span class="string">// 具体请看上面 MDN 的说明</span>
<span class="string">console.log(letterSort('de', ['a','z','ä'])) // ["a", "ä", "z"]</span>
<span class="string">console.log(letterSort('sv', ['a','z','ä'])) // ["a", "z", "ä"]</span>
</code></pre>
<h1 id="文中某些知识点参考链接"><a href="#文中某些知识点参考链接" class="headerlink" title="文中某些知识点参考链接"></a>文中某些知识点参考链接</h1><p><a href="http://es6.ruanyifeng.com/#docs/string" target="_blank" rel="noopener">阮老师的es6入门，字符串的扩展 推荐！</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/localeCompare" target="_blank" rel="noopener">localeCompare方法，十分建议看看MDN</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Collator" target="_blank" rel="noopener">Intl.Collator</a></p>
<p><a href="https://github.com/sunmaobin/sunmaobin.github.io/issues/43" target="_blank" rel="noopener">Array.sort高级用法</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/33335629" target="_blank" rel="noopener">JavaScript 正则表达式匹配汉字</a></p>
<p><a href="http://deerchao.net/tutorials/regex/regex.htm" target="_blank" rel="noopener">正则表达式30分钟入门教程 推荐</a></p>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/javascript/" rel="tag"># javascript</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/10/09/树状数据操作与递归/" rel="next" title="树状数据渲染">
                <i class="fa fa-chevron-left"></i> 树状数据渲染
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2021/03/16/2018-12-25-数组的方法的总结和使用/" rel="prev" title="数组的方法的总结和使用">
                数组的方法的总结和使用 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC8zODUwNy8xNTAzNQ"></div>
    </div>

  



        </div>
         
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">candice</p>
              <p class="site-description motion-element" itemprop="description">平凡的你的不平凡</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">50</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">8</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">21</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#字符串的属性"><span class="nav-number">2.</span> <span class="nav-text">字符串的属性</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#length"><span class="nav-number">2.1.</span> <span class="nav-text">length</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#字符串的静态方法"><span class="nav-number">3.</span> <span class="nav-text">字符串的静态方法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#字符的-Unicode-表示法"><span class="nav-number">3.1.</span> <span class="nav-text">字符的 Unicode 表示法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#String-fromCharCode"><span class="nav-number">3.2.</span> <span class="nav-text">String.fromCharCode()</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#作用于高位编码（higher-values）"><span class="nav-number">3.2.1.</span> <span class="nav-text">作用于高位编码（higher values）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#String-fromCodePoint"><span class="nav-number">3.3.</span> <span class="nav-text">String.fromCodePoint()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#String-raw-和-模板字符串"><span class="nav-number">3.4.</span> <span class="nav-text">String.raw 和 模板字符串</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#模板字符串"><span class="nav-number">3.4.1.</span> <span class="nav-text">模板字符串</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#String-raw"><span class="nav-number">3.4.2.</span> <span class="nav-text">String.raw</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#正则相关"><span class="nav-number">4.</span> <span class="nav-text">正则相关</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#split"><span class="nav-number">4.1.</span> <span class="nav-text">split</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#match"><span class="nav-number">4.2.</span> <span class="nav-text">match</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#replace"><span class="nav-number">4.3.</span> <span class="nav-text">replace</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#newSubStr-的特殊变量名"><span class="nav-number">4.3.1.</span> <span class="nav-text">newSubStr 的特殊变量名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#replace-中-function-的参数"><span class="nav-number">4.3.2.</span> <span class="nav-text">replace 中 function 的参数</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#字符编码相关"><span class="nav-number">5.</span> <span class="nav-text">字符编码相关</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#charAt"><span class="nav-number">5.1.</span> <span class="nav-text">charAt</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#charCodeAt"><span class="nav-number">5.2.</span> <span class="nav-text">charCodeAt</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#codePointAt"><span class="nav-number">5.3.</span> <span class="nav-text">codePointAt</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#normalize"><span class="nav-number">5.4.</span> <span class="nav-text">normalize</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#合并填充相关"><span class="nav-number">6.</span> <span class="nav-text">合并填充相关</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#concat"><span class="nav-number">6.1.</span> <span class="nav-text">concat</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#padEnd"><span class="nav-number">6.2.</span> <span class="nav-text">padEnd</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#padStart"><span class="nav-number">6.3.</span> <span class="nav-text">padStart</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#repeat"><span class="nav-number">6.4.</span> <span class="nav-text">repeat</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#搜索查找相关"><span class="nav-number">7.</span> <span class="nav-text">搜索查找相关</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#indexOf"><span class="nav-number">7.1.</span> <span class="nav-text">indexOf</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#lastIndexOf"><span class="nav-number">7.2.</span> <span class="nav-text">lastIndexOf</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#search"><span class="nav-number">7.3.</span> <span class="nav-text">search</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#includes"><span class="nav-number">7.4.</span> <span class="nav-text">includes</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#startsWith"><span class="nav-number">7.5.</span> <span class="nav-text">startsWith</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#endsWith"><span class="nav-number">7.6.</span> <span class="nav-text">endsWith</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#截取相关"><span class="nav-number">8.</span> <span class="nav-text">截取相关</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#slice"><span class="nav-number">8.1.</span> <span class="nav-text">slice</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#substr"><span class="nav-number">8.2.</span> <span class="nav-text">substr</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#substring"><span class="nav-number">8.3.</span> <span class="nav-text">substring</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#转换大小写相关"><span class="nav-number">9.</span> <span class="nav-text">转换大小写相关</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#toLowerCase"><span class="nav-number">9.1.</span> <span class="nav-text">toLowerCase</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#toLocaleLowerCase"><span class="nav-number">9.2.</span> <span class="nav-text">toLocaleLowerCase</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#toUpperCase"><span class="nav-number">9.3.</span> <span class="nav-text">toUpperCase</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#toLocaleUpperCase"><span class="nav-number">9.4.</span> <span class="nav-text">toLocaleUpperCase</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#删除空白字符相关"><span class="nav-number">10.</span> <span class="nav-text">删除空白字符相关</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#trim"><span class="nav-number">10.1.</span> <span class="nav-text">trim</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#trimRight"><span class="nav-number">10.2.</span> <span class="nav-text">trimRight</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#trimLeft"><span class="nav-number">10.3.</span> <span class="nav-text">trimLeft</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#两个不知名的方法"><span class="nav-number">11.</span> <span class="nav-text">两个不知名的方法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#toString-NaN"><span class="nav-number">11.1.</span> <span class="nav-text">toString</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#valueOf-NaN"><span class="nav-number">11.2.</span> <span class="nav-text">valueOf</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#排序相关"><span class="nav-number">12.</span> <span class="nav-text">排序相关</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#localeCompare"><span class="nav-number">12.1.</span> <span class="nav-text">localeCompare</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#文中某些知识点参考链接"><span class="nav-number">13.</span> <span class="nav-text">文中某些知识点参考链接</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>

 
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">candice</span>

   
</div>



<!-- 
  <div class="powered-by">footer.powered v3.7.1</div>

-->

<span class="post-meta-divider">The best preparation for tomorrow is doing your best today.</span>
<span>Hosted by
  <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a>
</span>


<!-- 
<div class="theme-info">主题 &mdash; 
  <a class="theme-link" target="_blank"  href="https://theme-next.org">NexT.Mist
  </a> v6.3.0
</div>
  -->
 







 
      </div>
    </footer>

    
    <div class="back-to-top"> 
      <i class="fa fa-arrow-up"></i>
      
    </div>
       
  </div> 

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

 


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>

   
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.3.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.3.0"></script>

 


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script>

 



  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  









 

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>




 
 
 
 
  
 
 
 
 
 

  <!-- 页面点击小红心 -->
  <script type="text/javascript" src="/js/src/love.js"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":100,"height":180},"mobile":{"show":true},"react":{"opacityDefault":1,"opacityOnHover":0.2}});</script></body>

</html>
